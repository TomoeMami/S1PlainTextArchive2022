

*****

####  睏睏  
##### 1#       楼主       发表于 2022-3-31 10:49

 本帖最后由 睏睏 于 2022-3-31 11:34 编辑 

之前负责我在做的一个项目的后端的同事前阵子跳槽了。接手的同事今天委婉的跟我说他觉得我们这个项目的代码有点问题所以这个项目进展很慢。

我说嗯嗯你说哪里有问题我改进，然后顺着他的举例我打开了代码一看......是跳槽的那个同事写的。（跳槽的同事负责后端，他改完后端之后顺手把我负责的前端也改了，所以接手的同事以为是我写的。）

----------

P.S. 不，我们公司不按代码行数算任何东西

<img src="https://tva3.sinaimg.cn/mw690/006Klmiygy1h0sv4suo7gj30lw0k016p.jpg" referrerpolicy="no-referrer">

*****

####  compass01  
##### 2#       发表于 2022-3-31 10:51

这个帖子算不算倒垃圾？

*****

####  gfgf65865  
##### 3#       发表于 2022-3-31 10:52

算

*****

####  默读者  
##### 4#       发表于 2022-3-31 10:52

<img src="https://static.saraba1st.com/image/smiley/face2017/001.png" referrerpolicy="no-referrer">你们git/svn能同时拿到前后端代码？？？

*****

####  terraner  
##### 5#       发表于 2022-3-31 10:53

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55256209&amp;ptid=2061463" target="_blank">默读者 发表于 2022-3-31 10:52</a>
你们git/svn能同时拿到前后端代码？？？</blockquote>
monorepo啥的不是挺常见

— from Google Pixel 6, Android 12 of [S1 Next Goose](https://pan.baidu.com/s/1mi43uRm) v2.5.2-play

*****

####  bapijun1  
##### 6#       发表于 2022-3-31 10:57

问题出在哪里?后端分程序员改了前端代码?

*****

####  燕山雪  
##### 7#       发表于 2022-3-31 10:58

你司是按提交代码行数算工作量的吧

*****

####  树洞36号  
##### 8#       发表于 2022-3-31 10:59

笑死真有写这么多的if

*****

####  睏睏  
##### 9#         楼主| 发表于 2022-3-31 11:00

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55256291&amp;ptid=2061463" target="_blank">燕山雪 发表于 2022-3-31 10:58</a>

你司是按提交代码行数算工作量的吧</blockquote>
不，没有

*****

####  Quelaan  
##### 10#       发表于 2022-3-31 11:01

什么了不起的杰弗里斯

﹍﹍﹍

评分

 参与人数 1战斗力 +1

|昵称|战斗力|理由|
|----|---|---|
| 2474089352| + 1|欢乐多|

查看全部评分

*****

####  pyjq  
##### 11#       发表于 2022-3-31 11:01

倒是挺整齐的

—— 来自 Xiaomi M2102J2SC, Android 11上的 [S1Next-鹅版](https://github.com/ykrank/S1-Next/releases) v2.5.2

*****

####  sheshiro  
##### 12#       发表于 2022-3-31 11:01

这是啥，教育培训么？

*****

####  睏睏  
##### 13#         楼主| 发表于 2022-3-31 11:02

 本帖最后由 睏睏 于 2022-3-31 11:13 编辑 
<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55256330&amp;ptid=2061463" target="_blank">sheshiro 发表于 2022-3-31 11:01</a>

这是啥，教育培训么？</blockquote>
研究机构让我们做的，它们要做关于教育的研究，这个系统用作记录哪些教育机构已经联系/参与研究，之类的

*****

####  aithinkso  
##### 14#       发表于 2022-3-31 11:04

是不怎么样，但好在不难改

—— 来自 Xiaomi Redmi K30 5G, Android 11上的 [S1Next-鹅版](https://github.com/ykrank/S1-Next/releases) v2.5.2

*****

####  shihomasturi  
##### 15#       发表于 2022-3-31 11:09

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55256278&amp;ptid=2061463" target="_blank">bapijun1 发表于 2022-3-31 10:57</a>

问题出在哪里?后端分程序员改了前端代码?</blockquote>
你大概不是程序员吧，这种全if...else...式代码被认为是典型的低质量难阅读的典范。

*****

####  nessaj  
##### 16#       发表于 2022-3-31 11:20

我还以为对key和value有什么运算，这不就是赋值吗....

record = {"": "" , ...} 就搞定的东西，乌泱泱写那么一大串...

*****

####  zyuco  
##### 17#       发表于 2022-3-31 11:21

<img src="https://static.saraba1st.com/image/smiley/face2017/067.png" referrerpolicy="no-referrer">曾经我也以为这种是典型的smelly code，直到我在谷歌的代码库里也见到一大堆这样的配置项

*****

####  ibuprofen  
##### 18#       发表于 2022-3-31 11:22

一般这种刚开始只有两三个分支，后来的人又不想重构，就往里面硬加else

*****

####  tokamak  
##### 19#       发表于 2022-3-31 11:22

程序员能不能别自说自话秀存在感了？

*****

####  南极洲  
##### 20#       发表于 2022-3-31 11:22

说不定你前同事是AI机器人呢

switch最后转换成机器码不就是一堆if么

再考虑到现在copliot之流的智能程度, 整个项目进度慢也说得通了.

*****

####  睏睏  
##### 21#         楼主| 发表于 2022-3-31 11:23

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55256619&amp;ptid=2061463" target="_blank">ibuprofen 发表于 2022-3-31 11:22</a>

一般这种刚开始只有两三个分支，后来的人又不想重构，就往里面硬加else</blockquote>
是的，然后一口气加了几十个

*****

####  Litccc  
##### 22#       发表于 2022-3-31 11:24

记得把https改http，不然电脑看不到图

*****

####  朝游北海  
##### 23#       发表于 2022-3-31 11:26

那这种多个if应该怎么重构，想学习一下

*****

####  睏睏  
##### 24#         楼主| 发表于 2022-3-31 11:26

 本帖最后由 睏睏 于 2022-3-31 11:31 编辑 

<img src="https://tva1.sinaimg.cn/mw690/006Klmiygy1h0swhwq6p4j30fm0gr43f.jpg" referrerpolicy="no-referrer">
<img src="http://tvax3.sinaimg.cn/mw690/006Klmiygy1h0swo8mn0tj30gl07ntah.jpg" referrerpolicy="no-referrer">
<img src="https://tvax4.sinaimg.cn/mw690/006Klmiygy1h0swjupl7qj30q00a50vz.jpg" referrerpolicy="no-referrer">

*****

####  bapijun1  
##### 25#       发表于 2022-3-31 11:28

<blockquote>朝游北海 发表于 2022-3-31 11:26
那这种多个if应该怎么重构，想学习一下</blockquote>
重构改善代码的既有设计，这本书里面有对于这类代码的改善方法的

*****

####  bapijun1  
##### 26#       发表于 2022-3-31 11:28

<blockquote>shihomasturi 发表于 2022-3-31 11:09
你大概不是程序员吧，这种全if...else...式代码被认为是典型的低质量难阅读的典范。 ...</blockquote>
图之前没加载出来

*****

####  最终兵器狂战  
##### 27#       发表于 2022-3-31 11:30

 本帖最后由 最终兵器狂战 于 2022-3-31 11:44 编辑 
<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55256693&amp;ptid=2061463" target="_blank">朝游北海 发表于 2022-3-31 11:26</a>

那这种多个if应该怎么重构，想学习一下</blockquote>
表驱动，请。

这种其实已经算是很好重构的那种了。论真正的屎山还得是多层嵌套多层传参不规则逻辑带上茫茫多完全散列的重复代码、死代码还有无意义代码的那种，看一眼就能让人生无可恋。。。<img src="https://static.saraba1st.com/image/smiley/face2017/217.gif" referrerpolicy="no-referrer">

*****

####  有点追求  
##### 28#       发表于 2022-3-31 11:31

第一幅图不就是两个枚举之间的转换吗，怎么要写这么多东西的，最好再检查一下是不是真的需要定义两个枚举<img src="https://static.saraba1st.com/image/smiley/face2017/001.png" referrerpolicy="no-referrer">

*****

####  87742035  
##### 29#       发表于 2022-3-31 11:33

我觉得这两套值可能是不同的人定义的，你又不可能去把别人代码里的变量全改一遍，改自己的也费劲所以就这样了？<img src="https://static.saraba1st.com/image/smiley/face2017/044.png" referrerpolicy="no-referrer">

*****

####  云卷花开  
##### 30#       发表于 2022-3-31 11:33

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55256308&amp;ptid=2061463" target="_blank">树洞36号 发表于 2022-3-31 10:59</a>
笑死真有写这么多的if</blockquote>
<img src="https://static.saraba1st.com/image/smiley/face2017/009.gif" referrerpolicy="no-referrer">写这样if不算太少见，最近在改clang 的代码，命令行相关的代码和属性处理那也是一个超级大的if

—— 来自 [S1Fun](https://s1fun.koalcat.com)



*****

####  PENTAX-DA  
##### 31#       发表于 2022-3-31 11:37

我觉得这样可读性很高的其实算很不错的了

*****

####  zayrq  
##### 32#       发表于 2022-3-31 11:40

这种做个字典就好了

*****

####  v沈馒馒v  
##### 33#       发表于 2022-3-31 11:43

else if

什么文艺复兴

*****

####  dazzle  
##### 34#       发表于 2022-3-31 11:49

这种根本就算不上什么问题

*****

####  PENTAX-DA  
##### 35#       发表于 2022-3-31 11:53

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55256706&amp;ptid=2061463" target="_blank">睏睏 发表于 2022-3-31 11:26</a></blockquote>
原来的人应该是看了这个教程<img src="https://static.saraba1st.com/image/smiley/face2017/067.png" referrerpolicy="no-referrer">

[https://www.bilibili.com/video/BV1J44y1n7U4](https://www.bilibili.com/video/BV1J44y1n7U4)

﹍﹍﹍

评分

 参与人数 1战斗力 +1

|昵称|战斗力|理由|
|----|---|---|
| 睏睏| + 1|欢乐多|

查看全部评分

*****

####  Wiksy  
##### 36#       发表于 2022-3-31 11:53

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55256791&amp;ptid=2061463" target="_blank">云卷花开 发表于 2022-3-31 11:33</a>

写这样if不算太少见，最近在改clang 的代码，命令行相关的代码和属性处理那也是一个超级大的if

 ...</blockquote>
那主要是因为每个命令行参数确实需要不同的处理。lz遇到这种情况事实上需要的处理都是单一的（值的映射）所以并不需要这种if吧

*****

####  山崎怜奈  
##### 37#       发表于 2022-3-31 11:57

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55256458&amp;ptid=2061463" target="_blank">shihomasturi 发表于 2022-3-31 11:09</a>

你大概不是程序员吧，这种全if...else...式代码被认为是典型的低质量难阅读的典范。 ...</blockquote>
能不能讲讲用什么代码能替代<img src="https://static.saraba1st.com/image/smiley/face2017/007.png" referrerpolicy="no-referrer">

我是非科班的代码新手，也是写的这种。。。

*****

####  thq  
##### 38#       发表于 2022-3-31 11:58

这个总比if+魔数强

*****

####  zayrq  
##### 39#       发表于 2022-3-31 12:00

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55257104&amp;ptid=2061463" target="_blank">山崎怜奈 发表于 2022-3-31 11:57</a>

能不能讲讲用什么代码能替代

我是非科班的代码新手，也是写的这种。。。 ...</blockquote>
简单的逻辑（set某个特定值）就直接键值对写成一个表格，按照key的值去取就行。复杂的逻辑把value改成函数指针（或者匿名函数），不同的逻辑单独写一个函数出来。

*****

####  septem123  
##### 40#       发表于 2022-3-31 12:02

能跑就不错了  要什么自行车<img src="https://static.saraba1st.com/image/smiley/face2017/066.png" referrerpolicy="no-referrer">

*****

####  RookieTnT  
##### 41#       发表于 2022-3-31 12:02

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55257104&amp;ptid=2061463" target="_blank">山崎怜奈 发表于 2022-3-31 11:57</a>

能不能讲讲用什么代码能替代

我是非科班的代码新手，也是写的这种。。。 ...</blockquote>
switch case...

*****

####  unlsycn  
##### 42#       发表于 2022-3-31 12:04

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55256326&amp;ptid=2061463" target="_blank">pyjq 发表于 2022-3-31 11:01</a>
倒是挺整齐的

—— 来自 Xiaomi M2102J2SC, Android 11上的 S1Next-鹅版 v2.5.2</blockquote>
autoformat当然整齐<img src="https://static.saraba1st.com/image/smiley/face2017/067.png" referrerpolicy="no-referrer">

*****

####  山崎怜奈  
##### 43#       发表于 2022-3-31 12:04

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55257148&amp;ptid=2061463" target="_blank">zayrq 发表于 2022-3-31 12:00</a>

简单的逻辑（set某个特定值）就直接键值对写成一个表格，按照key的值去取就行。复杂的逻辑把value改成函 ...</blockquote>
<img src="https://static.saraba1st.com/image/smiley/animal2017/008.png" referrerpolicy="no-referrer">感谢！

*****

####  山崎怜奈  
##### 44#       发表于 2022-3-31 12:06

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55257171&amp;ptid=2061463" target="_blank">RookieTnT 发表于 2022-3-31 12:02</a>

switch case...</blockquote>
我是python用户，看了下就是用switch方法对吧，也是建个字典啥的<img src="https://static.saraba1st.com/image/smiley/animal2017/008.png" referrerpolicy="no-referrer">

*****

####  oldttt  
##### 45#       发表于 2022-3-31 12:17

作为泥潭码农反面典型 我表示这样没什么问题 你写个表一样是手写一大堆字串 用的时候还要判断表里有没这个key 多此一举 新人接手加一个条目 复制粘贴也是改俩字串 找到表也是写俩字串 

*****

####  hourousha  
##### 46#       发表于 2022-3-31 12:18

说实话，只是改成传统的switch case可读性也没比if-else if强哪去，写起来也不怎么爽；如果是c#8开始的那种Pattern Matching的switch语法，能好一点。如果处理逻辑复杂那改成表驱动有必要，否则的话，if-else没什么问题。有些东西没必要那么僵化要看具体情况，比如goto的使用。

*****

####  正义大朋友  
##### 47#       发表于 2022-3-31 12:20

又不是不能跑。jpg<img src="https://static.saraba1st.com/image/smiley/face2017/152.png" referrerpolicy="no-referrer">

*****

####  cstljn  
##### 48#       发表于 2022-3-31 12:31

没用魔法值，算不错了。这个优化得上设计模式了，但也要考虑成本，因为你的业务就是一个设值而已，关键是这个简单业务这样算不算可改可读，维护频率高不高

*****

####  darklinden  
##### 49#       发表于 2022-3-31 12:41

看见这种代码第一反应不是去页面或者函数顶上查有没有
// Do Not Change! Code generated by xxx
吗…

—— 来自 [S1Fun](https://s1fun.koalcat.com)

﹍﹍﹍

评分

 参与人数 2战斗力 +3

|昵称|战斗力|理由|
|----|---|---|
| henvelleng| + 2|我也是|
| fmonion| + 1|草|

查看全部评分

*****

####  abcbuzhiming  
##### 50#       发表于 2022-3-31 12:58

我来抬个杠，其实在这种简单场景下，主楼的那种写法和39楼说的表驱动写法，无论是代码行数还是可读性都是差不多的，表驱动有突出优势的时候是要驱动的代码比较复杂的情况。在简单逻辑情况下，初始化表消耗的代码其实和写这种if else区别并不大，这也是为啥现在很多人又放弃了表启动写法，继续写if elseif。

*****

####  睏睏  
##### 51#         楼主| 发表于 2022-3-31 12:59

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55257051&amp;ptid=2061463" target="_blank">PENTAX-DA 发表于 2022-3-31 11:53</a>

原来的人应该是看了这个教程

https://www.bilibili.com/video/BV1J44y1n7U4</blockquote>
笑出了《魔笛》夜后咏叹调

*****

####  woodcoin  
##### 52#       发表于 2022-3-31 12:59

不美观但是我不认为这些代码会影响项目进度
我想不出有什么修改场景会因为这个结构造成效率低下的

[  -- 来自 能看大图的 Stage1官方 Android客户端](https://www.coolapk.com/apk/140634)

*****

####  睏睏  
##### 53#         楼主| 发表于 2022-3-31 13:17

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55257908&amp;ptid=2061463" target="_blank">woodcoin 发表于 2022-3-31 12:59</a>

不美观但是我不认为这些代码会影响项目进度

我想不出有什么修改场景会因为这个结构造成效率低下的</blockquote>
效率低下的原因是我两个小时能写完的代码我一般报两天

*****

####  xxad  
##### 54#       发表于 2022-3-31 13:19

假如拆分上没有拆到多此一举的话，if else组合应该是跑起来速度最快的写法！！

图也看不到，盲猜了

*****

####  xinleoii  
##### 55#       发表于 2022-3-31 13:23

又不是不能跑，又不是读不懂

*****

####  jctc  
##### 56#       发表于 2022-3-31 13:27

你们是没看过做科学计算的那些代码

这种代码已经非常好了

*****

####  aithinkso  
##### 57#       发表于 2022-3-31 13:44

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55257899&amp;ptid=2061463" target="_blank">abcbuzhiming 发表于 2022-3-31 12:58</a>

我来抬个杠，其实在这种简单场景下，主楼的那种写法和39楼说的表驱动写法，无论是代码行数还是可读性都是差 ...</blockquote>
那两段代码, 行数表驱动分别省去大约1/2和3/4, 差不少了.

可读性来说, 高自由度的 let, if 语句都是较难预测的.

比如这两段代码没贴完的部分可能发生比表驱动离谱得多的操作, 你必须看完才能确定.

和你说的恰恰相反, 简单的逻辑应该选用表驱动; 而当你看到 if, 那么应该意味着这段代码不是一个简单的映射问题.

当然, 写个表驱动能干出一堆额外行数的某些版本的某些语言除外 <img src="https://static.saraba1st.com/image/smiley/face2017/043.png" referrerpolicy="no-referrer">

*****

####  abcbuzhiming  
##### 58#       发表于 2022-3-31 14:35

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55258453&amp;ptid=2061463" target="_blank">aithinkso 发表于 2022-3-31 13:44</a>

那两段代码, 行数表驱动分别省去大约1/2和3/4, 差不少了.

可读性来说, 高自由度的 let, if 语句都是较难 ...</blockquote>
我个人认为只有第二张图值得使用表驱动，可以像你说的那样，节省二分之一甚至3/4的代码。但是第一张图用不用表驱动都无关紧要。第一张图它那种写法，换成表驱动也节约不了代码。

当然，“比如这两段代码没贴完的部分可能发生比表驱动离谱得多的操作, 你必须看完才能确定”，这一段你说的是对的，如果它的if 里面含有离谱的多的操作，那它就不适合和这一堆简单赋值逻辑代码放一起

*****

####  payboy  
##### 59#       发表于 2022-3-31 15:10

有门禁系统会过不了，没门禁？又不是不能跑!

*****

####  PNK  
##### 60#       发表于 2022-3-31 16:17

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55257221&amp;ptid=2061463" target="_blank">山崎怜奈 发表于 2022-3-31 12:06</a>

我是python用户，看了下就是用switch方法对吧，也是建个字典啥的</blockquote>
switch case照样是每个参数写一行赋值，没啥区别

要减少代码行数的话用字典就行了

这种代码可读性差主要是太长了，你要是参数不多的话就按主楼这么写其实也无所谓



*****

####  774nanashi  
##### 61#       发表于 2022-3-31 16:43

有点难绷，感觉像是一开始就几个ifelse，后续多了就开始屎山加屎弃疗了

*****

####  kenqqex  
##### 62#       发表于 2022-3-31 16:48

map

*****

####  蓬莱妹红  
##### 63#       发表于 2022-3-31 16:50

其实还好，没有太大的阅读障碍

*****

####  廿九  
##### 64#       发表于 2022-3-31 16:51

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55256755&amp;ptid=2061463" target="_blank">最终兵器狂战 发表于 2022-3-31 11:30</a>

表驱动，请。

这种其实已经算是很好重构的那种了。论真正的屎山还得是多层嵌套多层传参不规则逻辑带上茫茫 ...</blockquote>
这不就是我在改的代码吗哈哈哈哈哈呜呜呜呜

*****

####  柳生常闇斎  
##### 65#       发表于 2022-3-31 17:00

有的时候临时加功能ifelse真的很方便，至于后续维护嘛，那就不关我事了<img src="https://static.saraba1st.com/image/smiley/face2017/034.png" referrerpolicy="no-referrer">



*****

####  Jet.Black  
##### 66#       发表于 2022-3-31 17:24

这是什么的语言？看着有点像kotlin

*****

####  aithinkso  
##### 67#       发表于 2022-3-31 17:28

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55261277&amp;ptid=2061463" target="_blank">Jet.Black 发表于 2022-3-31 17:24</a>

这是什么的语言？看着有点像kotlin</blockquote>
JavaScript

*****

####  Jet.Black  
##### 68#       发表于 2022-3-31 17:32

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55261344&amp;ptid=2061463" target="_blank">aithinkso 发表于 2022-3-31 17:28</a>
JavaScript</blockquote>
好多年不写JavaScript，现在每行结束不用分号了么？

<img src="https://static.saraba1st.com/image/smiley/face2017/009.gif" referrerpolicy="no-referrer">

*****

####  museqsou  
##### 69#       发表于 2022-3-31 17:36

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55257899&amp;ptid=2061463" target="_blank">abcbuzhiming 发表于 2022-3-31 12:58</a>

我来抬个杠，其实在这种简单场景下，主楼的那种写法和39楼说的表驱动写法，无论是代码行数还是可读性都是差 ...</blockquote>
表驱动最大的意义还是让接手的人一看就知道是取值，一大坨if中间是可以加各种奇怪的操作

*****

####  aithinkso  
##### 70#       发表于 2022-3-31 17:37

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55261402&amp;ptid=2061463" target="_blank">Jet.Black 发表于 2022-3-31 17:32</a>

好多年不写JavaScript，现在每行结束不用分号了么？</blockquote>
一直可以不用，语言自带自动分号插入机制

*****

####  chain_233  
##### 71#       发表于 2022-3-31 17:40

只要有一个能跑就行 <img src="https://static.saraba1st.com/image/smiley/face2017/186.png" referrerpolicy="no-referrer">

*****

####  Jet.Black  
##### 72#       发表于 2022-3-31 17:41

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55261468&amp;ptid=2061463" target="_blank">aithinkso 发表于 2022-3-31 17:37</a>
一直可以不用，语言自带自动分号插入机制</blockquote>
用不用分号都行，编程语言语法怎么可以这样…

刚上网搜一下，用不用分号还是两大水火不容的阵营

原来JavaScript 这么草台啊

<img src="https://static.saraba1st.com/image/smiley/face2017/067.png" referrerpolicy="no-referrer">

*****

####  布拉维坎的屠夫  
##### 73#       发表于 2022-3-31 17:43

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55257171&amp;ptid=2061463" target="_blank">RookieTnT 发表于 2022-3-31 12:02</a>

switch case...</blockquote>
这又是什么新的坑，应该是处理逻辑和数据分离吧，这种按表驱动去改就好了，赋值是一个函数，kv对应是一个数据源



*****

####  cuslaa  
##### 74#       发表于 2022-3-31 17:44

看到这么多if，头皮都麻了。 

*****

####  aithinkso  
##### 75#       发表于 2022-3-31 17:47

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55261513&amp;ptid=2061463" target="_blank">Jet.Black 发表于 2022-3-31 17:41</a>

用不用分号都行，编程语言语法怎么可以这样…

刚上网搜一下，用不用分号还是两大水火不容的阵营</blockquote>
写过很多要分号的, 但你说能不写, 我立马不写了 <img src="https://static.saraba1st.com/image/smiley/face2017/067.png" referrerpolicy="no-referrer">

*****

####  女神アイギス  
##### 76#       发表于 2022-3-31 17:48

别重构了，关键问题是把每个if干啥的写个注释在边上- -<img src="https://static.saraba1st.com/image/smiley/face2017/001.png" referrerpolicy="no-referrer">

*****

####  shihomasturi  
##### 77#       发表于 2022-3-31 17:48

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55261513&amp;ptid=2061463" target="_blank">Jet.Black 发表于 2022-3-31 17:41</a>

用不用分号都行，编程语言语法怎么可以这样…

刚上网搜一下，用不用分号还是两大水火不容的阵营</blockquote>
因为JS最早就是被设计成轻量级的浏览器脚本语言，在浏览器中写一行执行一行，有没有分号问题不大。近些年JS才越来越“重型化”，规范也越来越向“正规”编程语言的C#，CPP等靠近。但是很多轻量级语言和解释语言（不存在预编译）的历史遗留问题很多。

*****

####  女神アイギス  
##### 78#       发表于 2022-3-31 17:52

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55256706&amp;ptid=2061463" target="_blank">睏睏 发表于 2022-3-31 11:26</a></blockquote>
<img src="https://static.saraba1st.com/image/smiley/face2017/066.png" referrerpolicy="no-referrer">这个真的笑死

讲真主楼的图我倒觉得写法没啥大问题

*****

####  Jet.Black  
##### 79#       发表于 2022-3-31 17:56

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55261569&amp;ptid=2061463" target="_blank">aithinkso 发表于 2022-3-31 17:47</a>
写过很多要分号的, 但你说能不写, 我立马不写了</blockquote>
不用分号，我这种喜欢乱换行的，估计要死的很惨<img src="https://static.saraba1st.com/image/smiley/face2017/067.png" referrerpolicy="no-referrer">

看了一眼厂里的typescript，大家还都在写分号，感觉得救了…



*****

####  aithinkso  
##### 80#       发表于 2022-3-31 18:03

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55261674&amp;ptid=2061463" target="_blank">Jet.Black 发表于 2022-3-31 17:56</a>

不用分号，我这种喜欢乱换行的，估计要死的很惨

看了一眼厂里的typescript，大家还都在写分号， ...</blockquote>
现代工具很成熟的, 随便换行, 格式化一下大概率就好了

*****

####  Jet.Black  
##### 81#       发表于 2022-3-31 18:07

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55261586&amp;ptid=2061463" target="_blank">shihomasturi 发表于 2022-3-31 17:48</a>

因为JS最早就是被设计成轻量级的浏览器脚本语言，在浏览器中写一行执行一行，有没有分号问题不大。近些年 ...</blockquote>
分号很可怕的，以前上学时候有个傻逼老师c语言期末出题最喜欢折腾分号

我还记得有道题大概这样：
 int b = 0; for(int i=0; i &lt; 10; i++);     b ++; printf("%d",b);复制代码

写运行结果，很多兄弟都答错了

<img src="https://static.saraba1st.com/image/smiley/face2017/065.png" referrerpolicy="no-referrer">



*****

####  aithinkso  
##### 82#       发表于 2022-3-31 18:32

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55261792&amp;ptid=2061463" target="_blank">Jet.Black 发表于 2022-3-31 18:07</a>

分号很可怕的，以前上学时候有个傻逼老师c语言期末出题最喜欢折腾分号

我还记得有道题大概这样：</blockquote>
这典型的车棚老师 <img src="https://static.saraba1st.com/image/smiley/face2017/067.png" referrerpolicy="no-referrer">

*****

####  tk553521  
##### 83#       发表于 2022-3-31 18:35

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55261792&amp;ptid=2061463" target="_blank">Jet.Black 发表于 2022-3-31 18:07</a>
分号很可怕的，以前上学时候有个傻逼老师c语言期末出题最喜欢折腾分号

我还记得有道题大概这样：</blockquote>
这老师真是有点大病

—— 来自 Sony XQ-AT72, Android 11上的 [S1Next-鹅版](https://github.com/ykrank/S1-Next/releases) v2.5.2



*****

####  山崎怜奈  
##### 84#       发表于 2022-3-31 19:38

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55260371&amp;ptid=2061463" target="_blank">PNK 发表于 2022-3-31 16:17</a>

switch case照样是每个参数写一行赋值，没啥区别

要减少代码行数的话用字典就行了

这种代码可读性差主要 ...</blockquote>
其实我本来就一个if 两个elif 结果有问题然后加了好多 然后画美不看了<img src="https://static.saraba1st.com/image/smiley/animal2017/009.png" referrerpolicy="no-referrer">



*****

####  13号  
##### 85#       发表于 2022-3-31 20:16

只有我一个人看不到图？



*****

####  女神アイギス  
##### 86#       发表于 2022-3-31 20:33

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55261792&amp;ptid=2061463" target="_blank">Jet.Black 发表于 2022-3-31 18:07</a>

分号很可怕的，以前上学时候有个傻逼老师c语言期末出题最喜欢折腾分号

我还记得有道题大概这样：</blockquote>
<img src="https://static.saraba1st.com/image/smiley/face2017/067.png" referrerpolicy="no-referrer">我记得我学C语言的时候特别流行这种题

只要你写过程序，那你一眼看中的答案就可以排除掉

*****

####  walfeds  
##### 87#       发表于 2022-3-31 20:40

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55261792&amp;ptid=2061463" target="_blank">Jet.Black 发表于 2022-3-31 18:07</a>
分号很可怕的，以前上学时候有个傻逼老师c语言期末出题最喜欢折腾分号

我还记得有道题大概这样：</blockquote>
多半沾点<img src="https://static.saraba1st.com/image/smiley/face2017/067.png" referrerpolicy="no-referrer">

—— 来自 Xiaomi M2012K11AC, Android 12上的 [S1Next-鹅版](https://github.com/ykrank/S1-Next/releases) v2.5.2



*****

####  默读者  
##### 88#       发表于 2022-3-31 20:45

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55260816&amp;ptid=2061463" target="_blank">廿九 发表于 2022-3-31 16:51</a>

这不就是我在改的代码吗哈哈哈哈哈呜呜呜呜</blockquote>
千万不要改！！！我的技术主管看了我的屎山代码就问我这代码嵌套那么多能用不，我说能用，然后三下五除二演示了一次，的确能用，我问他能优化不，他说试试看，过了三天再去看其他同事写的类似的模块，发现我的屎山代码被他们复制到了他们的模块里面并且已经跑满了大半个项目，我傻逼了

*****

####  aji47  
##### 89#       发表于 2022-3-31 20:53

 本帖最后由 aji47 于 2022-3-31 20:56 编辑 

这算啥

我这个月接手一个奇葩傻逼的代码。

npm有现成实现的库，他各种加班自己实现了全是bug的车轮。2千行代码我一眼没看，全部删除，替换成现成的。

http post正常人几行的事情，他订阅模式然后再去异步合并，写了百来行，各种秘制bug。又是被我直接删除，重写。还有数据就30个，他要各种搞cache。然后各种bug难维护，全部删除。

关键他搞cache性能还很卡，因为用户随便什么操作。他就去全局重画页面。

最后他5000行代码被我重写成1000行不到

真不知道那个傻逼跳槽去哪里了

希望他没转正就被辞退

*****

####  ornoway  
##### 90#       发表于 2022-3-31 21:05

这不挺好的么，简单易懂，不算屎山了



*****

####  毒菇  
##### 91#       发表于 2022-3-31 21:32

<img src="https://static.saraba1st.com/image/smiley/face2017/067.png" referrerpolicy="no-referrer">这代码会不会是用代码生成的



*****

####  PENTAX-DA  
##### 92#       发表于 2022-3-31 22:12

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55257903&amp;ptid=2061463" target="_blank">睏睏 发表于 2022-3-31 12:59</a>

笑出了《魔笛》夜后咏叹调</blockquote>
我以为这就是开玩笑的，直到看到群里有人说

<img src="https://img.saraba1st.com/forum/202203/31/221239iz9032sssd1s3e00.png" referrerpolicy="no-referrer">

<strong>7GT_O9FL{`_(VDH{W8IGH.png</strong> (93.71 KB, 下载次数: 0)

下载附件

2022-3-31 22:12 上传

*****

####  カリオストロ  
##### 93#       发表于 2022-3-31 22:16

其实这种代码也没什么，后面的人要维护扩展的时候也不会说看不懂

有的时候你接手的代码这里要改一下那里要改一下，都要考虑美观可读都想着去重构的话，反而会浪费时间和精力

重构代码后要不要去运行一下看看各种业务会不会报一些奇怪的错



*****

####  bapijun1  
##### 94#       发表于 2022-3-31 22:33

<blockquote>PENTAX-DA 发表于 2022-3-31 22:12
我以为这就是开玩笑的，直到看到群里有人说</blockquote>
之前遇过类似的问题，win能跑，linux跑不了



*****

####  aithinkso  
##### 95#       发表于 2022-3-31 22:51

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55265179&amp;ptid=2061463" target="_blank">PENTAX-DA 发表于 2022-3-31 22:12</a>
我以为这就是开玩笑的，直到看到群里有人说</blockquote>
开拼写检查能很大程度减少这类问题

—— 来自 Xiaomi Redmi K30 5G, Android 11上的 [S1Next-鹅版](https://github.com/ykrank/S1-Next/releases) v2.5.2



*****

####  omnitoken  
##### 96#       发表于 2022-3-31 23:04

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55261513&amp;ptid=2061463" target="_blank">Jet.Black 发表于 2022-3-31 17:41</a>

用不用分号都行，编程语言语法怎么可以这样…

刚上网搜一下，用不用分号还是两大水火不容的阵营</blockquote>
eslint 请



*****

####  r_ex  
##### 97#       发表于 2022-3-31 23:55

这个代码问题并不在什么if else if写得太啰嗦了，再改改也不见得就更简洁了，反而可能变得不直接了，容易出错

第一张图很多单个if，不用else if不太能接受，逻辑上不自然

另外可以教你同事用用git blame来查是谁写的代码



*****

####  Cypher_96  
##### 98#       发表于 2022-4-1 02:32

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55261674&amp;ptid=2061463" target="_blank">Jet.Black 发表于 2022-3-31 17:56</a>
 不用分号，我这种喜欢乱换行的，估计要死的很惨  看了一眼厂里的typescript，大家还都在写分号， ...</blockquote>
不是有eslint吗？

*****

####  liu_tianyi  
##### 99#       发表于 2022-4-1 03:09

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55266523&amp;ptid=2061463" target="_blank">r_ex 发表于 2022-3-31 23:55</a>
这个代码问题并不在什么if else if写得太啰嗦了，再改改也不见得就更简洁了，反而可能变得不直接了，容易出 ...</blockquote>
主要是else if命中以后后面的判定就不用执行了，全if的话从头到尾要一个一个执行过来<img src="https://static.saraba1st.com/image/smiley/face2017/001.png" referrerpolicy="no-referrer">代码优化不就是把大概率命中的放前面，小概率的放后面来降低判断开销嘛



*****

####  yunxyz  
##### 100#       发表于 2022-4-1 06:48

我觉得还好啊，迭代到一定时候确实容易出这样的代码，没必要单拉出来嘲讽<img src="https://static.saraba1st.com/image/smiley/face2017/001.png" referrerpolicy="no-referrer">

*****

####  Vincent_law  
##### 101#       发表于 2022-4-1 06:50

这种人也能跳槽？居然有下家？



*****

####  睏睏  
##### 102#         楼主| 发表于 2022-4-1 08:25

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55267959&amp;ptid=2061463" target="_blank">yunxyz 发表于 2022-4-1 06:48</a>

我觉得还好啊，迭代到一定时候确实容易出这样的代码，没必要单拉出来嘲讽 ...</blockquote>
也没有到嘲讽的意思，我自己水平也非常次。只是看到的时候很震惊，觉得有点乐，就发出来同乐。譬如24楼就是真的很乐。

*****

####  睏睏  
##### 103#         楼主| 发表于 2022-4-1 08:28

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55265179&amp;ptid=2061463" target="_blank">PENTAX-DA 发表于 2022-3-31 22:12</a>

我以为这就是开玩笑的，直到看到群里有人说</blockquote>
我还干过什么事，Debug的时候，浏览器开了很多很多页面，同时开了服务器上的dev的和本地dev的页面，然后刷新着服务器上的那个页面，疯狂改自己本地的代码，然后百思不得骑姐怎么就修不好。



*****

####  r_ex  
##### 104#       发表于 2022-4-1 22:58

<blockquote><a href="httphttps://bbs.saraba1st.com/2b/forum.php?mod=redirect&amp;goto=findpost&amp;pid=55267718&amp;ptid=2061463" target="_blank">liu_tianyi 发表于 2022-4-1 03:09</a>

主要是else if命中以后后面的判定就不用执行了，全if的话从头到尾要一个一个执行过来代码优化不就 ...</blockquote>
这样平均上也只是少跑了一半的判断，不改变复杂度，从性能上来看应该没有太大意义吧

而且一般这种地方也不是瓶颈

